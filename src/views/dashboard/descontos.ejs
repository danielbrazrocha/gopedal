<main class="container">
    <section class="banner">

      <!-- Visualação condicional dos erros de validação do express-validator -->
      <% if (typeof errors != 'undefined') { %> 
        <p class="text-danger">Foram encontrados erros na sua solicitação.<br>Corrija as informações e envie novamente.</p>
        <ul>
          <% errors.forEach(error => { %>  
            <li class="register-error-alert" ><%= error.msg %></li>
          <% }) %>
        </ul>
      <% } %>

      <!-- Visualização dos erros no backend -->
      <% if (typeof error != 'undefined') { %> 
        <h4 class="h5 register-error-alert"><%= error %> </h4>
      <% } %> 

      <div class="table-responsive">
        <table class="table table-striped table-sm table-hover">
          <thead>
            <tr>
              <th class="adminpanel__title" scope="col">#</th>
              <th class="adminpanel__title" scope="col">Nome</th>
              <th class="adminpanel__title" scope="col">Descrição</th>
              <th class="adminpanel__title" scope="col">Percentual (%)</th>
              <th class="adminpanel__title" scope="col">Ativo</th>
            </tr>
          </thead>
          <tbody>

            <% for (let i = 0; i < descontos.length; i++) { %>
              <tr>
                  
                    <td>
                      <a href="/painel/desconto/<%= descontos[i].id %>">
                        <%= i+1 %>
                      </a>
                    </td>
                    <td>
                      <a href="/painel/desconto/<%= descontos[i].id %>">
                        <%= descontos[i].name %>
                      </a>
                    </td>
                    <td>
                      <a href="/painel/desconto/<%= descontos[i].id %>">
                        <%= descontos[i].description.substring(0, 100)+' ...' %>
                      </a>
                    </td>
                    <td>
                      <a href="/painel/desconto/<%= descontos[i].id %>">
                        <%= descontos[i].discount_percent %>
                      </a>
                    </td>        
                    <td>
                      <a href="/painel/desconto/<%= descontos[i].id %>">
                        <%= descontos[i].active ? "SIM" : "NÃO"  %>
                      </a>
                    </td>               
                </tr>
            <% } %>
          </tbody>
        </table>
            <nav aria-label="...">
              <ul class="pagination">
                <li class="page-item disabled">
                  <a class="page-link" href="#" tabindex="-1">Previous</a>
                </li>
                <li class="page-item active"><a class="page-link" href="#">1</a></li>
                <li class="page-item">
                  <a class="page-link" href="#">2 </a>
                </li>
                <li class="page-item"><a class="page-link" href="#">3</a></li>
                <li class="page-item">
                  <a class="page-link" href="#">Next</a>
                </li>
              </ul>
            </nav>
      
            <a href="/painel"        
              class="btn btn-secondary">
              Voltar
            </a>
            <a href="/painel/desconto/add/form"        
              class="btn btn-success">
              Adicionar
          </a>

    </section>
  </main>